{"version":3,"sources":["app.js"],"names":["sidebar","document","querySelector","closeBtn","Logout","BtnUpdateSpending","Modal","DeleteSpending","querySelectorAll","menuBtnChange","classList","contains","replace","getId","e","buttonId","preventDefault","target","nodeName","parentElement","id","value","async","Errores","descripcion_gasto","previsto_gasto","ImprimirAlerta","Formulario","FormData","url","resultado","fetch","method","body","json","Swal","fire","icon","title","text","button","then","setTimeout","window","location","href","error","deleteSpen","append","respuesta","guardado","reload","mensaje","AlertaP","textContent","add","remove","Alert","mixin","customClass","confirmButton","cancelButton","buttonsStyling","showCancelButton","confirmButtonText","cancelButtonText","reverseButtons","result","isConfirmed","dismiss","DismissReason","cancel","close","addEventListener","toggle","forEach","Delete"],"mappings":"AACA,IAAAA,QAAAC,SAAAC,cAAA,YACAC,SAAAF,SAAAC,cAAA,QACA,MAAAE,OAAAH,SAAAC,cAAA,WACAG,kBAAAJ,SAAAC,cAAA,cACAI,MAAAL,SAAAC,cAAA,gBACAK,eAAAN,SAAAO,iBAAA,iBAiBA,SAAAC,gBACAT,QAAAU,UAAAC,SAAA,QACAR,SAAAO,UAAAE,QAAA,UAAA,qBAEAT,SAAAO,UAAAE,QAAA,oBAAA,WAGA,SAAAC,MAAAC,GAEA,IAAAC,EACA,OAFAD,EAAAE,iBAEAF,EAAAG,OAAAC,UACA,IAAA,OACAH,EAAAD,EAAAG,OAAAE,cAAAA,cAAAC,GACA,MACA,IAAA,MACAL,EAAAD,EAAAG,OAAAE,cAAAC,GACA,MACA,QACAL,EAAAD,EAAAG,OAAAG,GAGAL,EAAAd,SAAAC,cAAA,YAAAmB,MAEAC,eAAAC,QAAAT,GACA,IACAA,EAAAE,iBACA,MAAAQ,EAAAvB,SAAAC,cAAA,gBAAAmB,MACAI,EAAAxB,SAAAC,cAAA,aAAAmB,MACAD,EAAAnB,SAAAC,cAAA,YAAAmB,MACA,GAAA,KAAAG,GAAA,KAAAC,EAEA,YADAC,eAAA,8CAGA,MAAAC,EAAA,IAAAC,SAAAtB,OAEAuB,EAAA,wCACAC,QAAAC,MAAAF,EAAA,CACAG,OAAA,OACAC,KAAAN,WAEAG,EAAAI,QACAJ,WACAK,KAAAC,KAAA,CACAC,KAAA,UACAC,MAAA,iBACAC,KAAA,sCACAC,OAAA,OACAC,KAAA,KACAC,WAAA,KACAC,OAAAC,SAAAC,KAAA,uDAAAzB,GACA,OAGA,MAAA0B,GACAX,KAAAC,KAAA,CACAC,KAAA,QACAC,MAAA,QACAC,KAAA,uCAIAjB,eAAAyB,WAAAjC,GACA,IACAA,EAAAE,iBACA,MAAAI,EAAAnB,SAAAC,cAAA,mBAAAmB,MACAM,EAAA,IAAAC,SACAD,EAAAqB,OAAA,KAAA5B,GACA,MAAAS,EAAA,iDACAoB,QAAAlB,MAAAF,EAAA,CACAG,OAAA,OACAC,KAAAN,WAEAsB,EAAAf,QACAgB,UACAf,KAAAC,KAAA,CACAC,KAAA,UACAC,MAAA,kBACAC,KAAA,uCACAC,OAAA,OACAC,KAAA,KACAE,OAAAC,SAAAO,WAGA,MAAAL,GACAX,KAAAC,KAAA,CACAC,KAAA,QACAC,MAAA,QACAC,KAAA,uCAIA,SAAAb,eAAA0B,GACA,MAAAC,EAAApD,SAAAC,cAAA,kBACAmD,EAAA3C,UAAAC,SAAA,kBACA0C,EAAAC,YAAAF,EACAC,EAAA3C,UAAA6C,IAAA,iBAEAb,WAAA,KACAW,EAAA3C,UAAA8C,OAAA,gBACAH,EAAAC,YAAA,IACA,KAGA,SAAAG,MAAA3C,GACAA,EAAAE,iBACAmB,KAAAuB,MAAA,CACAC,YAAA,CACAC,cAAA,kBACAC,aAAA,kBAEAC,gBAAA,IAEA1B,KAAA,CACAE,MAAA,kCACAD,KAAA,UACA0B,kBAAA,EACAC,kBAAA,cACAC,iBAAA,gBACAC,gBAAA,IACAzB,KAAA0B,IACAA,EAAAC,YACAzB,OAAAC,SAAAC,KAAA,UAGAsB,EAAAE,UAAAlC,KAAAmC,cAAAC,QAEApC,KAAAqC,UA5IAvE,SAAAwE,iBAAA,mBAAA,KACAtE,SAAAsE,iBAAA,QAAA,KACAzE,QAAAU,UAAAgE,OAAA,QACAjE,kBAEAL,OAAAqE,iBAAA,QAAAhB,OACApD,kBAAAoE,iBAAA,QAAA5D,OACAN,eAAAoE,QAAAC,IACAA,EAAAH,iBAAA,SAAA1B,cAEAzC,MAAAmE,iBAAA,SAAAlD","file":"bundle.js","sourcesContent":["/* ***VARIABLES*** */\r\nlet sidebar = document.querySelector(\".sidebar\");\r\nlet closeBtn = document.querySelector(\"#btn\");\r\nconst Logout = document.querySelector('#logout');\r\nconst BtnUpdateSpending = document.querySelector('.btn-gasto');\r\nconst Modal = document.querySelector('#modal-gasto');\r\nconst DeleteSpending = document.querySelectorAll('#btn-eliminar');\r\n\r\n/* ***EVENT LISTENERS*** */\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  closeBtn.addEventListener(\"click\", ()=>{\r\n    sidebar.classList.toggle(\"open\");\r\n    menuBtnChange();\r\n  });\r\n  Logout.addEventListener('click', Alert);\r\n  BtnUpdateSpending.addEventListener('click', getId);\r\n  DeleteSpending.forEach((Delete) => {\r\n    Delete.addEventListener('submit', deleteSpen);\r\n  });\r\n  Modal.addEventListener('submit', Errores);\r\n});\r\n\r\n/* ***FUNCIONES*** */\r\nfunction menuBtnChange() {\r\n if(sidebar.classList.contains(\"open\")){\r\n   closeBtn.classList.replace(\"bx-menu\", \"bx-menu-alt-right\");\r\n }else {\r\n   closeBtn.classList.replace(\"bx-menu-alt-right\",\"bx-menu\");\r\n }\r\n}\r\nfunction getId(e){\r\n  e.preventDefault();\r\n  let buttonId;\r\n  switch(e.target.nodeName){\r\n    case 'path':\r\n      buttonId = e.target.parentElement.parentElement.id; \r\n      break;\r\n    case 'svg':\r\n      buttonId = e.target.parentElement.id;\r\n      break;\r\n    default:\r\n      buttonId = e.target.id;\r\n      break;\r\n  }\r\n  buttonId = document.querySelector('#idmodal').value;\r\n}\r\nasync function Errores(e){\r\n  try{\r\n    e.preventDefault();\r\n    const descripcion_gasto = document.querySelector('#descripcion').value,\r\n    previsto_gasto = document.querySelector('#previsto').value;\r\n    const id = document.querySelector('#idmodal').value;\r\n    if(descripcion_gasto === '' || previsto_gasto === ''){\r\n      ImprimirAlerta('Descripción y/o Gasto previsto Obligatorio');\r\n      return;\r\n    }\r\n    const Formulario = new FormData(Modal);\r\n   \r\n    const url = 'http://localhost:3000/Dashboard/modal';\r\n    const resultado = await fetch(url, {\r\n      method: 'POST',\r\n      body: Formulario\r\n    });\r\n    const respuesta = await resultado.json();\r\n    if(respuesta.resultado){\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: 'Gasto agregado',\r\n        text: 'Tu gasto fue agregado correctamente',\r\n        button: 'OK'\r\n      }).then( () => {\r\n        setTimeout(() => {\r\n            window.location.href = `http://localhost:3000/Dashboard/dashboard?View=8&id=${id}`;\r\n        }, 1000);\r\n      });\r\n    }\r\n  }catch(error){\r\n    Swal.fire({\r\n      icon: 'error',\r\n      title: 'Error',\r\n      text: 'Hubo un error al guardar tu gasto'\r\n    });\r\n  }\r\n}\r\nasync function deleteSpen(e){\r\n  try{\r\n    e.preventDefault();\r\n    const id = document.querySelector('#eliminar-gasto').value;\r\n    const Formulario = new FormData();\r\n    Formulario.append('id',id);\r\n    const url = 'http://localhost:3000/Dashboard/eliminar-gasto';\r\n    const respuesta = await fetch(url, {\r\n      method: 'POST',\r\n      body: Formulario\r\n    });\r\n    const resultado = await respuesta.json();\r\n    if(resultado.guardado){\r\n      Swal.fire({\r\n        icon: 'success',\r\n        title: 'Gasto Eliminado',\r\n        text: 'Tu gasto fue eliminado correctamente',\r\n        button: 'OK'\r\n      }).then( () => {\r\n        window.location.reload();\r\n      });\r\n    }\r\n  }catch(error){\r\n    Swal.fire({\r\n      icon: 'error',\r\n      title: 'Error',\r\n      text: 'Hubo un error al guardar tu gasto'\r\n    });\r\n  }\r\n}\r\nfunction ImprimirAlerta(mensaje){\r\n  const AlertaP = document.querySelector('.errores-modal');\r\n  if(!AlertaP.classList.contains('error-alerta')){\r\n    AlertaP.textContent = mensaje;\r\n    AlertaP.classList.add('error-alerta');\r\n  }\r\n  setTimeout(()=>{\r\n    AlertaP.classList.remove('error-alerta');\r\n    AlertaP.textContent = '';\r\n  },5000);\r\n}\r\n/* ***SWEET ALERT*** */\r\nfunction Alert(e){\r\n  e.preventDefault();\r\n  const swalWithBootstrapButtons = Swal.mixin({\r\n    customClass: {\r\n      confirmButton: 'btn btn-success',\r\n      cancelButton: 'btn btn-danger'\r\n    },\r\n    buttonsStyling: false\r\n  });\r\n  swalWithBootstrapButtons.fire({\r\n    title: '¿Estas seguro de cerrar sesión?',\r\n    icon: 'warning',\r\n    showCancelButton: true,\r\n    confirmButtonText: 'Si, seguro!',\r\n    cancelButtonText: 'No, cancelar!',\r\n    reverseButtons: true\r\n  }).then((result) => {\r\n    if (result.isConfirmed) {\r\n      window.location.href = '/logout';\r\n    } else if (\r\n      /* Read more about handling dismissals below */\r\n      result.dismiss === Swal.DismissReason.cancel\r\n    ) {\r\n      Swal.close();\r\n    }\r\n  })\r\n}\r\n\r\n"]}