let sidebar=document.querySelector(".sidebar"),closeBtn=document.querySelector("#btn");const Logout=document.querySelector("#logout"),BtnUpdateSpending=document.querySelectorAll(".btn-gasto"),Modal=document.querySelector("#modal-gasto"),DeleteSpending=document.querySelectorAll("#btn-eliminar"),IdScript=document.querySelector("#test-id"),Update=document.querySelector(".updateSpendig"),ModalAdd=document.querySelector(".add"),CloseModal=document.querySelector(".btn-close");let Id,SpendingData=[];function CalcPrevisto(){document.querySelectorAll("#diferenteTable").forEach(e=>{parseInt(e.textContent)<0?e.classList.add("text-danger"):e.classList.remove("text-danger")})}function menuBtnChange(){sidebar.classList.contains("open")?closeBtn.classList.replace("bx-menu","bx-menu-alt-right"):closeBtn.classList.replace("bx-menu-alt-right","bx-menu")}function ModalView(e){e.preventDefault();const t=document.querySelector("#descripcion"),a=document.querySelector("#previsto"),o=document.querySelector("#real");t.value="",a.value="",o.value=""}async function GetSpending(){const e=await fetch("http://localhost:3000/Dashboard/getGasto",{method:"GET"});return await e.json()}function ClassUpdate(e){e.preventDefault(),Modal.classList.contains("update")&&Modal.classList.remove("update")}function getId(e){e.preventDefault(),Modal.classList.add("update");let t="";switch(e.target.nodeName){case"path":t=e.target.parentElement.parentElement.id;break;case"svg":t=e.target.parentElement.id;break;default:t=e.target.id}document.querySelector("#idgasto").value=t;let a=SpendingData.find(e=>e.id===t);console.log(a),AddValues(a)}function AddValues(e){document.querySelector("#descripcion").value=e.descripcion_gasto,document.querySelector("#previsto").value=e.previsto_gasto,document.querySelector("#real").value=e.real_gasto||""}async function addSpending(e){try{if(e.preventDefault(),Modal.classList.contains("update"))updateSpendig();else{ValidarModal();const e=new FormData(Modal),t="http://localhost:3000/Dashboard/modal",a=await fetch(t,{method:"POST",body:e});(await a.json()).resultado&&Swal.fire({icon:"success",title:"Gasto agregado",text:"Tu gasto fue agregado correctamente",button:"OK"}).then(()=>{setTimeout(()=>{window.location.href="http://localhost:3000/Dashboard/dashboard?View=8&id="+Id},1e3)})}}catch(e){Swal.fire({icon:"error",title:"Error",text:"Hubo un error al guardar tu gasto"})}}async function updateSpendig(){try{const e=document.querySelector("#idgasto").value,t="http://localhost:3000/Dashboard/editar-gasto",a=new FormData;a.append("id",e),a.append("descripcion_previsto",document.querySelector("#descripcion").value),a.append("previsto_gasto",document.querySelector("#previsto").value),a.append("real_gasto",document.querySelector("#real").value);const o=await fetch(t,{method:"POST",body:a});(await o.json()).resultado&&(Swal.fire({icon:"success",title:"Gasto Actualizado",text:"Tu gasto fue actualizado correctamente",button:"OK"}).then(()=>{window.location.href="http://localhost:3000/Dashboard/dashboard?View=8&id="+Id}),Modal.classList.remove("update"))}catch(e){console.log(e)}}async function deleteSpen(e){try{e.preventDefault();const t=document.querySelector("#eliminar-gasto").value,a=new FormData;a.append("id",t);const o="http://localhost:3000/Dashboard/eliminar-gasto",n=await fetch(o,{method:"POST",body:a});(await n.json()).guardado&&Swal.fire({icon:"success",title:"Gasto Eliminado",text:"Tu gasto fue eliminado correctamente",button:"OK"}).then(()=>{window.location.reload()})}catch(e){Swal.fire({icon:"error",title:"Error",text:"Hubo un error al guardar tu gasto"})}}function ValidarModal(){const e=document.querySelector("#descripcion").value,t=document.querySelector("#previsto").value;""!==e&&""!==t||ImprimirAlerta("Descripción y/o Gasto previsto Obligatorio")}function ImprimirAlerta(e){const t=document.querySelector(".errores-modal");t.classList.contains("error-alerta")||(t.textContent=e,t.classList.add("error-alerta")),setTimeout(()=>{t.classList.remove("error-alerta"),t.textContent=""},5e3)}function Alert(e){e.preventDefault();Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"¿Estas seguro de cerrar sesión?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, seguro!",cancelButtonText:"No, cancelar!",reverseButtons:!0}).then(e=>{e.isConfirmed?window.location.href="/logout":e.dismiss===Swal.DismissReason.cancel&&Swal.close()})}document.addEventListener("DOMContentLoaded",async()=>{await GetSpending().then(e=>{SpendingData.push(...e.resultado)}).catch(e=>{console.log(e)}),closeBtn.addEventListener("click",()=>{sidebar.classList.toggle("open"),menuBtnChange()}),Logout.addEventListener("click",Alert),ModalAdd.addEventListener("click",ModalView),Modal.addEventListener("submit",addSpending),BtnUpdateSpending.forEach(e=>{e.addEventListener("click",getId)}),DeleteSpending.forEach(e=>{e.addEventListener("submit",deleteSpen)}),CloseModal.addEventListener("click",ClassUpdate);const e=new URLSearchParams(window.location.search);Id=parseInt(e.get("id")),CalcPrevisto()});
//# sourceMappingURL=bundle.js.map
